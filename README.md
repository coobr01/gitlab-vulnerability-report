# Custom Vulnerability Reporting

Cloned from: https://gitlab.com/jwagner-demo/vandelay-industries/engineering/custom-vulnerability-reporting

This code can be used to create a custom GitLab based vulnerability report as HTML which can be used to share, print, export, etc.

## Getting started

To run this script, mirror this repo into GitLab and add the following [CI / CD Variables](https://docs.gitlab.com/ee/ci/variables/):

| Variable Name | Description | Example Value|
|---------------|------------|---------------|
| GRAPHQL_API_TOKEN 	| [Personal Access Token](https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html) with read_api access 	| secure value                                                            	|
| GRAPHQL_API_URL   	| The URL to your GraphQL API. For SaaS this will be https://gitlab.com/api/graphql                                 	| https://gitlab.com/api/graphql or https://your-gitlab-url/api/graphql 	|
| PROJECT_PATH      	| The project path that you want to get vulnerabilities for.                                                        	| jwagner-demo/vandelay-industries/engineering/rails-saas                 	|


## How it works

1. When the pipeline runs, it runs `build_report.py`.
2. `build_report.py` gets the vulnerabilities for your project using the [GraphQL Vulnerability API](https://docs.gitlab.com/ee/api/graphql/reference/#queryvulnerabilities). It then loads `template.html` as a string and inserts the vulnerabilities and counts into the proper locations, and then creates a file named `report.html` with the updated data.
3. After the script runs, `report.html` is uploaded as an artifact.

## Customization Ideas

1. Update the GraphQL query to get different data.
2. Update `template.html` with your logo or any other information you may want. It's styled using [Tailwind CSS](https://tailwindcss.com/).


